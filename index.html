<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="description" content="Senior-Easy - Aplikacja dla senior√≥w u≈ÇatwiajƒÖca kontakt z rodzinƒÖ i zarzƒÖdzanie lekami" />
  <meta name="theme-color" content="#3B82F6" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Senior-Easy" />
  
  <title>Senior-Easy - Aplikacja dla Senior√≥w</title>
  
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.png">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { important: true }</script>
  
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{width:100%;height:100%;overflow-x:hidden;overscroll-behavior-y:contain;-webkit-tap-highlight-color:transparent;touch-action:manipulation}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;background:linear-gradient(135deg,#dbeafe 0%,#e9d5ff 100%)}
    *{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}
    input,textarea,select{-webkit-user-select:text;user-select:text}
    button{cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,.1)}
    
    .emergency-button{position:fixed;bottom:100px;right:20px;width:70px;height:70px;border-radius:50%;background:linear-gradient(to bottom,#ff3333,#cc0000);box-shadow:0 4px 15px rgba(255,0,0,0.5);display:flex;align-items:center;justify-content:center;color:white;font-size:24px;font-weight:bold;z-index:100;border:3px solid white;animation:pulse 2s infinite;transition:all 0.3s ease}
    .emergency-button:active{transform:scale(0.9);box-shadow:0 2px 8px rgba(255,0,0,0.7)}
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(255,0,0,0.7)}70%{box-shadow:0 0 0 15px rgba(255,0,0,0)}100%{box-shadow:0 0 0 0 rgba(255,0,0,0)}}
    
    .weekday-button{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:2px;border:2px solid #e5e5e5;background:white;font-weight:bold}
    .weekday-button.selected{background:#3B82F6;color:white;border-color:#3B82F6}
    .weekday-button:active{transform:scale(0.95)}
    
    .notification-badge{position:absolute;top:-5px;right:-5px;background:red;color:white;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:bold}
    
    .loading-screen{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999}
    .loading-spinner{width:50px;height:50px;border:5px solid #ffffff33;border-top:5px solid white;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px}
    @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    
    .weather-icon{font-size:60px;text-align:center}
    .news-item{border-bottom:2px solid #e5e5e5;padding-bottom:12px;margin-bottom:12px}
    .news-item:last-child{border-bottom:none}
    .fun-fact{background:linear-gradient(135deg,#f0f9ff 0%,#fef7ff 100%);border-left:5px solid #3B82F6}
  </style>
</head>
<body>
  <div id="root" class="p-2 sm:p-4 max-w-4xl mx-auto pb-20 min-h-screen"></div>

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script>
  const { useState, useEffect, useRef } = React;

  function SeniorEasyApp() {
    const [currentScreen, setCurrentScreen] = useState('home');
    const [medications, setMedications] = useState([]);
    const [familyContacts, setFamilyContacts] = useState([]);
    const [localServices, setLocalServices] = useState([]);
    const [notifications, setNotifications] = useState([]);
    const [careMode, setCareMode] = useState(true);
    const [showInstallPrompt, setShowInstallPrompt] = useState(false);
    const [deferredPrompt, setDeferredPrompt] = useState(null);
    const [showNotifyDialog, setShowNotifyDialog] = useState(false);
    const [selectedMedication, setSelectedMedication] = useState(null);
    const [showEmergencyDialog, setShowEmergencyDialog] = useState(false);
    const [showEmergencySettings, setShowEmergencySettings] = useState(false);
    const [emergencySettingsTab, setEmergencySettingsTab] = useState('appearance');
    const [isInstallable, setIsInstallable] = useState(false);
    const [isLoading, setIsLoading] = useState(true);

    const [newMedName, setNewMedName] = useState('');
    const [newMedTime, setNewMedTime] = useState('');
    const [newMedDays, setNewMedDays] = useState([]);
    const [newContactName, setNewContactName] = useState('');
    const [newContactPhone, setNewContactPhone] = useState('');
    const [newContactApp, setNewContactApp] = useState('');
    const [newServiceName, setNewServiceName] = useState('');
    const [newServicePhone, setNewServicePhone] = useState('');
    const [newServiceIcon, setNewServiceIcon] = useState('');
    const [editingContact, setEditingContact] = useState(null);
    const [editingService, setEditingService] = useState(null);
    const [editingMedication, setEditingMedication] = useState(null);

    const [emergencySettings, setEmergencySettings] = useState({
      enabled: true,
      position: 'bottom-right',
      size: 70,
      color: 'red',
      pulse: true,
      familyMessage: 'üö® PILNA WIADOMO≈öƒÜ! Potrzebujƒô pomocy! Proszƒô o kontakt.',
      medicalMessage: 'üö® PILNA WIADOMO≈öƒÜ! Potrzebujƒô pomocy medycznej! Proszƒô o natychmiastowy kontakt.',
      servicesMessage: 'üö® PILNA WIADOMO≈öƒÜ! Potrzebujƒô pomocy! Proszƒô o kontakt.',
      familyPhones: [],
      medicalPhones: ['112', '999'],
      servicesPhones: ['997', '998']
    });

    const [newPhoneNumber, setNewPhoneNumber] = useState('');
    const [editingPhoneType, setEditingPhoneType] = useState('family');
    const weekdays = ['Pon', 'Wt', '≈ör', 'Czw', 'Pt', 'Sb', 'Nd'];
    const fileInputRef = useRef(null);

    // DODANE NOWE STANY
    const [weather, setWeather] = useState(null);
    const [news, setNews] = useState([]);
    const [funFacts, setFunFacts] = useState([]);
    const [currentFunFact, setCurrentFunFact] = useState('');
    const [weatherLoading, setWeatherLoading] = useState(false);
    const [newsLoading, setNewsLoading] = useState(false);
    const [userLocation, setUserLocation] = useState(null);
    const [showLocationPrompt, setShowLocationPrompt] = useState(false);

    // Funkcja do pobierania pogody
    const fetchWeather = async (lat, lon) => {
      setWeatherLoading(true);
      try {
        // U≈ºywamy darmowego API OpenWeatherMap (potrzebny klucz API)
        // Dla demonstracji u≈ºywamy mock danych
        const mockWeather = {
          temperature: Math.round(Math.random() * 15 + 5),
          feels_like: Math.round(Math.random() * 15 + 3),
          humidity: Math.round(Math.random() * 30 + 50),
          description: ['S≈Çonecznie', 'Czƒô≈õciowo pochmurnie', 'Deszczowo', 'Mg≈Ça'][Math.floor(Math.random() * 4)],
          icon: ['‚òÄÔ∏è', '‚õÖ', 'üåßÔ∏è', 'üå´Ô∏è'][Math.floor(Math.random() * 4)],
          city: userLocation ? `Twoja okolica` : 'Warszawa',
          forecast: [
            { day: 'Jutro', temp: Math.round(Math.random() * 15 + 5), icon: '‚õÖ' },
            { day: 'Pojutrze', temp: Math.round(Math.random() * 15 + 5), icon: 'üåßÔ∏è' },
            { day: 'Za 3 dni', temp: Math.round(Math.random() * 15 + 5), icon: '‚òÄÔ∏è' }
          ]
        };
        
        setTimeout(() => {
          setWeather(mockWeather);
          setWeatherLoading(false);
          addNotification(`Pobrano aktualnƒÖ pogodƒô dla ${mockWeather.city}`);
        }, 800);
        
      } catch (error) {
        console.error('B≈ÇƒÖd pobierania pogody:', error);
        setWeatherLoading(false);
        addNotification('Nie uda≈Ço siƒô pobraƒá pogody');
      }
    };

    // Funkcja do pobierania wiadomo≈õci
    const fetchNews = async () => {
      setNewsLoading(true);
      try {
        const mockNews = [
          {
            id: 1,
            title: 'Nowe ≈õwiadczenia dla senior√≥w od 2025 roku',
            description: 'RzƒÖd zapowiada dodatkowe wsparcie finansowe dla os√≥b powy≈ºej 70. roku ≈ºycia.',
            time: '15:30',
            category: 'Polityka',
            source: 'WP.pl'
          },
          {
            id: 2,
            title: 'Bezp≈Çatne badania przesiewowe w ca≈Çej Polsce',
            description: 'Ministerstwo Zdrowia organizuje akcjƒô bada≈Ñ profilaktycznych dla senior√≥w.',
            time: '12:45',
            category: 'Zdrowie',
            source: 'WP.pl'
          },
          {
            id: 3,
            title: 'U≈Çatwienia w komunikacji miejskiej',
            description: 'Od stycznia nowe zni≈ºki dla senior√≥w w transporcie publicznym.',
            time: '10:20',
            category: 'Transport',
            source: 'WP.pl'
          },
          {
            id: 4,
            title: 'Kulturalne wydarzenia weekendowe',
            description: 'Teatry i muzea przygotowa≈Çy specjalne programy dla starszych os√≥b.',
            time: '09:15',
            category: 'Kultura',
            source: 'WP.pl'
          },
          {
            id: 5,
            title: 'Poradnik: Bezpieczne zakupy online',
            description: 'Jak uniknƒÖƒá oszustw podczas robienia zakup√≥w przez internet.',
            time: '08:30',
            category: 'Poradniki',
            source: 'WP.pl'
          }
        ];
        
        setTimeout(() => {
          setNews(mockNews);
          setNewsLoading(false);
          addNotification('Zaktualizowano wiadomo≈õci');
        }, 1000);
        
      } catch (error) {
        console.error('B≈ÇƒÖd pobierania wiadomo≈õci:', error);
        setNewsLoading(false);
        addNotification('Nie uda≈Ço siƒô pobraƒá wiadomo≈õci');
      }
    };

    // Inicjalizacja ciekawostek
    const initFunFacts = () => {
      const facts = [
        "üåª U≈õmiech zu≈ºywa mniej energii ni≈º marszczenie brwi.",
        "üìö Czytanie przez 6 minut dziennie redukuje stres o 68%.",
        "üö∂‚ôÇÔ∏è Codzienny 30-minutowy spacer mo≈ºe wyd≈Çu≈ºyƒá ≈ºycie nawet o 7 lat.",
        "üíß Picie wody rano poprawia metabolizm o 24%.",
        "üéµ S≈Çuchanie muzyki klasycznej poprawia pamiƒôƒá u senior√≥w.",
        "üßò‚ôÄÔ∏è Medytacja 10 minut dziennie obni≈ºa ci≈õnienie krwi.",
        "üçé Jedzenie jab≈Çka dziennie zmniejsza ryzyko wizyt u lekarza.",
        "‚úçÔ∏è Pisanie odrƒôczne ƒáwiczy m√≥zg lepiej ni≈º pisanie na klawiaturze.",
        "üå≥ Spƒôdzanie czasu w≈õr√≥d drzew zmniejsza poziom hormon√≥w stresu.",
        "ü§ù Kontakty spo≈Çeczne sƒÖ kluczowe dla zdrowia psychicznego senior√≥w.",
        "üé® Tw√≥rcze hobby jak malowanie czy rƒôkodzie≈Ço op√≥≈∫nia starzenie m√≥zgu.",
        "üêï Posiadanie psa zmusza do regularnych spacer√≥w i redukuje stres.",
        "üçµ Zielona herbata zawiera przeciwutleniacze wspierajƒÖce pamiƒôƒá.",
        "üß© RozwiƒÖzywanie krzy≈º√≥wek i puzzli ƒáwiczy szare kom√≥rki.",
        "üòä Osoby pozytywnie my≈õlƒÖce ≈ºyjƒÖ ≈õrednio 7 lat d≈Çu≈ºej."
      ];
      
      setFunFacts(facts);
      setCurrentFunFact(facts[Math.floor(Math.random() * facts.length)]);
    };

    // Funkcja do uzyskania lokalizacji u≈ºytkownika
    const getUserLocation = () => {
      if (!navigator.geolocation) {
        addNotification('Twoja przeglƒÖdarka nie wspiera geolokalizacji');
        fetchWeather(52.2297, 21.0122); // Domy≈õlnie Warszawa
        return;
      }
      
      setShowLocationPrompt(true);
      
      navigator.geolocation.getCurrentPosition(
        (position) => {
          const { latitude, longitude } = position.coords;
          setUserLocation({ latitude, longitude });
          fetchWeather(latitude, longitude);
          setShowLocationPrompt(false);
          addNotification('Lokalizacja pobrana pomy≈õlnie');
        },
        (error) => {
          console.error('B≈ÇƒÖd geolokalizacji:', error);
          fetchWeather(52.2297, 21.0122); // Domy≈õlnie Warszawa
          setShowLocationPrompt(false);
          addNotification('U≈ºywam domy≈õlnej lokalizacji (Warszawa)');
        },
        { enableHighAccuracy: true, timeout: 10000, maximumAge: 60000 }
      );
    };

    useEffect(() => {
      setTimeout(() => setIsLoading(false), 1000);

      const savedMeds = localStorage.getItem('medications');
      const savedContacts = localStorage.getItem('familyContacts');
      const savedServices = localStorage.getItem('localServices');
      const savedEmergencySettings = localStorage.getItem('emergencySettings');
      
      setMedications(savedMeds ? JSON.parse(savedMeds) : [
        {id:1,name:'Acard',time:'08:00',days:[0,1,2,3,4,5,6],lastTaken:null},
        {id:2,name:'Metformin',time:'12:00',days:[0,1,2,3,4,5,6],lastTaken:null},
        {id:3,name:'Amlozek',time:'20:00',days:[0,1,2,3,4,5,6],lastTaken:null}
      ]);
      setFamilyContacts(savedContacts ? JSON.parse(savedContacts) : [
        {id:1,name:'Anna (c√≥rka)',phone:'+48123456789',avatar:'üë©',app:'whatsapp'},
        {id:2,name:'Piotr (syn)',phone:'+48987654321',avatar:'üë®',app:'viber'},
        {id:3,name:'Dr. Kowalski',phone:'+48555123456',avatar:'üë®‚Äç‚öïÔ∏è',app:''}
      ]);
      setLocalServices(savedServices ? JSON.parse(savedServices) : [
        {id:1,name:'Transport Medyczny',phone:'800123456',icon:'üöë'},
        {id:2,name:'Pomoc Domowa',phone:'800654321',icon:'üè†'},
        {id:3,name:'Apteka z Dowozem',phone:'800789012',icon:'üíä'}
      ]);
      
      if (savedEmergencySettings) {
        const parsedSettings = JSON.parse(savedEmergencySettings);
        setEmergencySettings({
          ...parsedSettings,
          familyPhones: parsedSettings.familyPhones || [],
          medicalPhones: parsedSettings.medicalPhones || [],
          servicesPhones: parsedSettings.servicesPhones || []
        });
      }

      const reminderInterval = setInterval(() => {
        checkMedicationReminders();
      }, 60000);

      checkMedicationReminders();

      // Inicjalizacja nowych funkcji
      initFunFacts();
      fetchNews();
      
      // Pobierz pogodƒô przy starcie
      setTimeout(() => {
        getUserLocation();
      }, 2000);

      // Od≈õwie≈ºaj ciekawostkƒô co godzinƒô
      const factInterval = setInterval(() => {
        if (funFacts.length > 0) {
          const randomIndex = Math.floor(Math.random() * funFacts.length);
          setCurrentFunFact(funFacts[randomIndex]);
        }
      }, 3600000);

      // Od≈õwie≈ºaj wiadomo≈õci co 2 godziny
      const newsInterval = setInterval(() => {
        fetchNews();
      }, 7200000);

      // Od≈õwie≈ºaj pogodƒô co 30 minut
      const weatherInterval = setInterval(() => {
        if (userLocation) {
          fetchWeather(userLocation.latitude, userLocation.longitude);
        }
      }, 1800000);

      return () => {
        clearInterval(reminderInterval);
        clearInterval(factInterval);
        clearInterval(newsInterval);
        clearInterval(weatherInterval);
      };
    }, [userLocation, funFacts.length]);

    useEffect(() => {
      const handleBeforeInstallPrompt = (e) => { 
        e.preventDefault(); 
        setDeferredPrompt(e); 
        setIsInstallable(true);
        setShowInstallPrompt(true); 
      };

      const handleAppInstalled = () => {
        setDeferredPrompt(null);
        setIsInstallable(false);
        setShowInstallPrompt(false);
        addNotification('Aplikacja zosta≈Ça pomy≈õlnie zainstalowana!');
      };

      if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
        setIsInstallable(false);
        setShowInstallPrompt(false);
      }

      window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
      window.addEventListener('appinstalled', handleAppInstalled);

      return () => {
        window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
        window.removeEventListener('appinstalled', handleAppInstalled);
      };
    }, []);

    const handleInstallClick = async () => {
      if (!deferredPrompt) {
        if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
          addNotification('Aby zainstalowaƒá aplikacjƒô, u≈ºyj opcji "Dodaj do ekranu g≈Ç√≥wnego" w Safari');
          return;
        }
        addNotification('U≈ºyj opcji "Zainstaluj aplikacjƒô" w menu przeglƒÖdarki');
        return;
      }
      
      try {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        
        if (outcome === 'accepted') {
          addNotification('Aplikacja zosta≈Ça zainstalowana pomy≈õlnie!');
        } else {
          addNotification('Instalacja zosta≈Ça anulowana.');
        }
      } catch (error) {
        addNotification('B≈ÇƒÖd podczas instalacji. Spr√≥buj ponownie.');
      }
      
      setDeferredPrompt(null); 
      setIsInstallable(false);
      setShowInstallPrompt(false);
    };

    useEffect(() => { localStorage.setItem('medications', JSON.stringify(medications)); }, [medications]);
    useEffect(() => { localStorage.setItem('familyContacts', JSON.stringify(familyContacts)); }, [familyContacts]);
    useEffect(() => { localStorage.setItem('localServices', JSON.stringify(localServices)); }, [localServices]);
    useEffect(() => { localStorage.setItem('emergencySettings', JSON.stringify(emergencySettings)); }, [emergencySettings]);

    const addNotification = text => {
      const newNotif = { id: Date.now(), text, time: new Date().toLocaleTimeString('pl-PL', {hour:'2-digit',minute:'2-digit'}), read: false };
      setNotifications(prev => [newNotif, ...prev]);
    };

    const checkMedicationReminders = () => {
      const now = new Date();
      const currentDay = (now.getDay() + 6) % 7;
      const currentTime = now.toTimeString().slice(0, 5);
      
      medications.forEach(med => {
        if (!med.days.includes(currentDay)) return;
        
        const today = now.toDateString();
        if (med.lastTaken === today) return;
        
        const [medHour, medMin] = med.time.split(':').map(Number);
        const medTime = new Date();
        medTime.setHours(medHour, medMin, 0);
        
        const reminderTime = new Date(medTime.getTime() - 15 * 60000);
        const reminderTimeStr = reminderTime.toTimeString().slice(0, 5);
        
        if (currentTime === reminderTimeStr) {
          addNotification(`‚è∞ Przypomnienie: Za 15 minut przyjmij lek "${med.name}" o ${med.time}`);
        }
        
        if (currentTime === med.time) {
          addNotification(`üíä Czas na lek! Przyjmij "${med.name}"`);
        }
      });
    };

    const markMedicationTaken = id => {
      const medication = medications.find(med => med.id === id);
      if (!medication) return;
      
      const today = (new Date().getDay() + 6) % 7;
      const updatedDays = medication.days.filter(day => day !== today);
      const newDays = updatedDays.length === 0 ? [0, 1, 2, 3, 4, 5, 6] : updatedDays;
      const lastTaken = new Date().toDateString();
      
      setMedications(prev => prev.map(med => 
        med.id === id ? { ...med, days: newDays, lastTaken } : med
      ));
      
      if (careMode) {
        setSelectedMedication(medication);
        setShowNotifyDialog(true);
      } else {
        addNotification(`Lek "${medication.name}" zosta≈Ç przyjƒôty`);
      }
    };
  
    const sendNotification = (contactId) => {
      if (!selectedMedication) return;
      
      const contact = familyContacts.find(c => c.id === contactId);
      if (!contact) return;
      
      const message = encodeURIComponent(`‚úÖ Lek "${selectedMedication.name}" zosta≈Ç przyjƒôty o godzinie ${new Date().toLocaleTimeString('pl-PL', {hour:'2-digit', minute:'2-digit'})}`);
      const phone = contact.phone.replace(/[^\d+]/g, '');
      
      if (contact.app === 'whatsapp') {
        window.open(`https://api.whatsapp.com/send?phone=${phone}&text=${message}`, '_blank');
      } else if (contact.app === 'viber') {
        window.open(`viber://forward?text=${message}`, '_blank');
      } else {
        window.location.href = `sms:${phone}?body=${message}`;
      }
      
      addNotification(`Wys≈Çano powiadomienie do ${contact.name}`);
      setShowNotifyDialog(false);
      setSelectedMedication(null);
    };

    const sendToAll = () => {
      if (!selectedMedication) return;
      
      const familyWithApps = familyContacts.filter(c => c.app === 'whatsapp' || c.app === 'viber');
      const message = encodeURIComponent(`‚úÖ Lek "${selectedMedication.name}" zosta≈Ç przyjƒôty o godzinie ${new Date().toLocaleTimeString('pl-PL', {hour:'2-digit', minute:'2-digit'})}`);
      
      familyWithApps.forEach(contact => {
        const phone = contact.phone.replace(/[^\d+]/g, '');
        if (contact.app === 'whatsapp') {
          window.open(`https://api.whatsapp.com/send?phone=${phone}&text=${message}`, '_blank');
        } else if (contact.app === 'viber') {
          window.open(`viber://forward?text=${message}`, '_blank');
        }
      });
      
      addNotification(`Wys≈Çano powiadomienie do ${familyWithApps.length} os√≥b`);
      setShowNotifyDialog(false);
      setSelectedMedication(null);
    };

    const sendEmergencyMessage = (type) => {
      let message = '';
      let phonesToCall = [];
      
      if (type === 'family') {
        message = encodeURIComponent(emergencySettings.familyMessage);
        phonesToCall = emergencySettings.familyPhones;
      } else if (type === 'medical') {
        message = encodeURIComponent(emergencySettings.medicalMessage);
        phonesToCall = emergencySettings.medicalPhones;
      } else if (type === 'services') {
        message = encodeURIComponent(emergencySettings.servicesMessage);
        phonesToCall = emergencySettings.servicesPhones;
      }
      
      if (type === 'family' || type === 'medical') {
        const familyWithApps = familyContacts.filter(c => c.app === 'whatsapp' || c.app === 'viber');
        
        familyWithApps.forEach(contact => {
          const phone = contact.phone.replace(/[^\d+]/g, '');
          if (contact.app === 'whatsapp') {
            window.open(`https://api.whatsapp.com/send?phone=${phone}&text=${message}`, '_blank');
          } else if (contact.app === 'viber') {
            window.open(`viber://forward?text=${message}`, '_blank');
          }
        });
        
        addNotification(`Wys≈Çano wiadomo≈õƒá awaryjnƒÖ do ${familyWithApps.length} os√≥b`);
      }
      
      if (phonesToCall.length > 0) {
        const phoneToCall = phonesToCall[0];
        window.location.href = `tel:${phoneToCall}`;
        addNotification(`Dzwoniƒô pod numer: ${phoneToCall}`);
      } else {
        window.location.href = 'tel:112';
        addNotification(`Dzwoniƒô na numer alarmowy 112`);
      }
      
      setShowEmergencyDialog(false);
    };

    const updateEmergencySettings = (key, value) => {
      setEmergencySettings(prev => ({...prev, [key]: value}));
    };

    const addPhoneNumber = () => {
      if (!newPhoneNumber.trim()) return;
      const phoneKey = `${editingPhoneType}Phones`;
      const updatedPhones = [...emergencySettings[phoneKey], newPhoneNumber.trim()];
      updateEmergencySettings(phoneKey, updatedPhones);
      setNewPhoneNumber('');
    };

    const removePhoneNumber = (index, type) => {
      const phoneKey = `${type}Phones`;
      const updatedPhones = [...emergencySettings[phoneKey]];
      updatedPhones.splice(index, 1);
      updateEmergencySettings(phoneKey, updatedPhones);
    };

    const getEmergencyButtonStyle = () => {
      if (!emergencySettings.enabled) return { display: 'none' };
      
      const baseStyle = {
        width: `${emergencySettings.size}px`,
        height: `${emergencySettings.size}px`,
        fontSize: `${emergencySettings.size * 0.35}px`
      };
      
      if (emergencySettings.position === 'bottom-right') {
        baseStyle.bottom = '100px'; baseStyle.right = '20px';
      } else if (emergencySettings.position === 'bottom-left') {
        baseStyle.bottom = '100px'; baseStyle.left = '20px';
      } else if (emergencySettings.position === 'top-right') {
        baseStyle.top = '100px'; baseStyle.right = '20px';
      } else if (emergencySettings.position === 'top-left') {
        baseStyle.top = '100px'; baseStyle.left = '20px';
      }
      
      if (emergencySettings.color === 'red') {
        baseStyle.background = 'linear-gradient(to bottom, #ff3333, #cc0000)';
      } else if (emergencySettings.color === 'blue') {
        baseStyle.background = 'linear-gradient(to bottom, #3366ff, #0033cc)';
      } else if (emergencySettings.color === 'orange') {
        baseStyle.background = 'linear-gradient(to bottom, #ff9933, #cc6600)';
      }
      
      if (emergencySettings.pulse) {
        baseStyle.animation = 'pulse 2s infinite';
      } else {
        baseStyle.animation = 'none';
      }
      
      return baseStyle;
    };

    const toggleDay = (dayIndex) => {
      if (newMedDays.includes(dayIndex)) {
        setNewMedDays(newMedDays.filter(d => d !== dayIndex));
      } else {
        setNewMedDays([...newMedDays, dayIndex]);
      }
    };

    const selectAllDays = () => setNewMedDays([0, 1, 2, 3, 4, 5, 6]);
    const clearDays = () => setNewMedDays([]);

    const addMedication = () => { 
      if (newMedName && newMedTime && newMedDays.length > 0) { 
        setMedications(prev => [...prev, { 
          id: Date.now(), 
          name: newMedName, 
          time: newMedTime, 
          days: [...newMedDays],
          lastTaken: null
        }]); 
        setNewMedName(''); 
        setNewMedTime(''); 
        setNewMedDays([]);
      } 
    };

    const deleteMedication = id => setMedications(prev => prev.filter(med => med.id !== id));
    
    const startEditMedication = (medication) => {
      setEditingMedication(medication.id);
      setNewMedName(medication.name);
      setNewMedTime(medication.time);
      setNewMedDays([...medication.days]);
    };

    const saveEditMedication = (id) => {
      setMedications(prev => prev.map(med => 
        med.id === id ? { 
          ...med, 
          name: newMedName, 
          time: newMedTime,
          days: [...newMedDays],
          lastTaken: med.lastTaken || null
        } : med
      ));
      setEditingMedication(null);
      setNewMedName('');
      setNewMedTime('');
      setNewMedDays([]);
    };

    const cancelEditMedication = () => {
      setEditingMedication(null);
      setNewMedName('');
      setNewMedTime('');
      setNewMedDays([]);
    };

    const makeCall = contact => { 
      if (contact.phone) window.location.href = `tel:${contact.phone}`; 
      if (careMode) addNotification(`Po≈ÇƒÖczenie z ${contact.name}`); 
    };

    const startVideoCall = (contact) => {
      if(!contact) return;
      const phone = contact.phone.replace(/[^\d+]/g,'');
      
      if(contact.app==='whatsapp') {
        window.open(`https://api.whatsapp.com/send?phone=${phone}&text=üìπ`, '_blank');
      } else if(contact.app==='viber') {
        window.open(`viber://forward?text=üìπ`, '_blank');
      } else {
        window.location.href = `tel:${phone}`;
      }
      
      if(careMode) addNotification(`Rozmowa wideo z ${contact.name}`);
    };

    const addContact = () => { 
      if (newContactName && newContactPhone) { 
        setFamilyContacts(prev => [...prev, { 
          id: Date.now(), 
          name: newContactName, 
          phone: newContactPhone, 
          avatar: 'üë§', 
          app: newContactApp 
        }]); 
        setNewContactName(''); 
        setNewContactPhone(''); 
        setNewContactApp(''); 
      } 
    };
    
    const deleteContact = id => setFamilyContacts(prev => prev.filter(c => c.id !== id));
    
    const startEditContact = contact => { 
      setEditingContact(contact.id); 
      setNewContactName(contact.name); 
      setNewContactPhone(contact.phone); 
      setNewContactApp(contact.app); 
    };
    
    const saveEditContact = id => { 
      setFamilyContacts(prev => prev.map(c => 
        c.id === id ? { ...c, name: newContactName, phone: newContactPhone, app: newContactApp } : c
      )); 
      setEditingContact(null); 
      setNewContactName(''); 
      setNewContactPhone(''); 
      setNewContactApp(''); 
    };
    
    const cancelEditContact = () => { 
      setEditingContact(null); 
      setNewContactName(''); 
      setNewContactPhone(''); 
      setNewContactApp(''); 
    };
    
    const addService = () => { 
      if (newServiceName && newServicePhone) { 
        setLocalServices(prev => [...prev, { 
          id: Date.now(), 
          name: newServiceName, 
          phone: newServicePhone, 
          icon: newServiceIcon || 'üè¢' 
        }]); 
        setNewServiceName(''); 
        setNewServicePhone(''); 
        setNewServiceIcon(''); 
      } 
    };
    
    const deleteService = id => setLocalServices(prev => prev.filter(s => s.id !== id));
    
    const startEditService = service => { 
      setEditingService(service.id); 
      setNewServiceName(service.name); 
      setNewServicePhone(service.phone); 
      setNewServiceIcon(service.icon); 
    };
    
    const saveEditService = id => { 
      setLocalServices(prev => prev.map(s => 
        s.id === id ? { ...s, name: newServiceName, phone: newServicePhone, icon: newServiceIcon || 'üè¢' } : s
      )); 
      setEditingService(null); 
      setNewServiceName(''); 
      setNewServicePhone(''); 
      setNewServiceIcon(''); 
    };
    
    const cancelEditService = () => { 
      setEditingService(null); 
      setNewServiceName(''); 
      setNewServicePhone(''); 
      setNewServiceIcon(''); 
    };
    
    const clearData = () => { 
      if (confirm('Czy na pewno chcesz wyczy≈õciƒá wszystkie zapisane dane?')) { 
        localStorage.clear(); 
        setMedications([]); 
        setFamilyContacts([]); 
        setLocalServices([]); 
        setNotifications([]); 
        addNotification('Wszystkie dane zosta≈Çy wyczyszczone');
      } 
    };

    const unreadNotificationsCount = notifications.filter(n => !n.read).length;

    const markAllNotificationsRead = () => {
      setNotifications(prev => prev.map(n => ({...n, read: true})));
    };

    // DODANE NOWE KOMPONENTY DO RENDEROWANIA

    const renderWeatherWidget = () => {
      return React.createElement('div', { className: 'bg-gradient-to-r from-blue-400 to-blue-600 text-white p-4 md:p-6 rounded-3xl shadow-xl mb-6' },
        React.createElement('div', { className: 'flex justify-between items-center mb-4' },
          React.createElement('h3', { className: 'text-2xl md:text-3xl font-bold' }, 'üå§Ô∏è Pogoda'),
          React.createElement('button', {
            onClick: getUserLocation,
            className: 'bg-white text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-2xl font-bold flex items-center',
            disabled: weatherLoading
          },
            weatherLoading ? '≈Åadowanie...' : 'üîÑ Od≈õwie≈º'
          )
        ),
        
        weatherLoading ? 
          React.createElement('div', { className: 'text-center py-8' },
            React.createElement('div', { className: 'loading-spinner mx-auto mb-4 border-white' }),
            React.createElement('p', null, 'Pobieram aktualnƒÖ pogodƒô...')
          )
        : weather ?
          React.createElement('div', null,
            React.createElement('div', { className: 'flex items-center justify-between mb-6' },
              React.createElement('div', null,
                React.createElement('div', { className: 'text-5xl md:text-6xl font-bold mb-2' }, `${weather.temperature}¬∞C`),
                React.createElement('div', { className: 'text-xl' }, weather.city),
                React.createElement('div', { className: 'text-lg opacity-90' }, `Odczuwalna: ${weather.feels_like}¬∞C`)
              ),
              React.createElement('div', { className: 'text-center' },
                React.createElement('div', { className: 'weather-icon' }, weather.icon),
                React.createElement('div', { className: 'text-xl font-bold' }, weather.description)
              )
            ),
            
            React.createElement('div', { className: 'bg-white bg-opacity-20 p-4 rounded-2xl mb-4' },
              React.createElement('div', { className: 'flex justify-between items-center mb-2' },
                React.createElement('span', null, 'üíß Wilgotno≈õƒá'),
                React.createElement('span', { className: 'font-bold' }, `${weather.humidity}%`)
              ),
              React.createElement('div', { className: 'text-sm opacity-90' }, 'Optymalna dla zdrowia')
            ),
            
            React.createElement('div', null,
              React.createElement('h4', { className: 'text-xl font-bold mb-3' }, 'Prognoza na 3 dni'),
              React.createElement('div', { className: 'grid grid-cols-3 gap-3' },
                weather.forecast.map((day, index) =>
                  React.createElement('div', {
                    key: index,
                    className: 'bg-white bg-opacity-20 p-3 rounded-2xl text-center'
                  },
                    React.createElement('div', { className: 'font-bold mb-1' }, day.day),
                    React.createElement('div', { className: 'text-3xl mb-1' }, day.icon),
                    React.createElement('div', { className: 'text-xl font-bold' }, `${day.temp}¬∞C`)
                  )
                )
              )
            )
          )
        :
          React.createElement('div', { className: 'text-center py-8' },
            React.createElement('p', { className: 'text-xl mb-4' }, 'Nie uda≈Ço siƒô pobraƒá pogody'),
            React.createElement('button', {
              onClick: getUserLocation,
              className: 'bg-white text-blue-600 px-6 py-3 rounded-2xl font-bold'
            }, 'Spr√≥buj ponownie')
          )
      );
    };

    const renderNewsWidget = () => {
      return React.createElement('div', { className: 'bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 md:p-6 rounded-3xl shadow-xl mb-6' },
        React.createElement('div', { className: 'flex justify-between items-center mb-4' },
          React.createElement('h3', { className: 'text-2xl md:text-3xl font-bold' }, 'üì∞ Wiadomo≈õci'),
          React.createElement('button', {
            onClick: fetchNews,
            className: 'bg-white text-purple-600 hover:bg-purple-50 px-4 py-2 rounded-2xl font-bold flex items-center',
            disabled: newsLoading
          },
            newsLoading ? '≈Åadowanie...' : 'üîÑ Od≈õwie≈º'
          )
        ),
        
        newsLoading ?
          React.createElement('div', { className: 'text-center py-8' },
            React.createElement('div', { className: 'loading-spinner mx-auto mb-4 border-white' }),
            React.createElement('p', null, 'Pobieram najnowsze wiadomo≈õci...')
          )
        : news.length > 0 ?
          React.createElement('div', { className: 'space-y-4' },
            news.slice(0, 3).map(item =>
              React.createElement('div', {
                key: item.id,
                className: 'news-item'
              },
                React.createElement('div', { className: 'flex justify-between items-start mb-2' },
                  React.createElement('span', { className: 'bg-white bg-opacity-30 px-3 py-1 rounded-full text-sm' }, item.category),
                  React.createElement('span', { className: 'text-sm opacity-80' }, item.time)
                ),
                React.createElement('h4', { className: 'text-xl font-bold mb-2' }, item.title),
                React.createElement('p', { className: 'opacity-90 text-sm' }, item.description),
                React.createElement('div', { className: 'text-xs opacity-70 mt-2' }, `≈πr√≥d≈Ço: ${item.source}`)
              )
            ),
            React.createElement('button', {
              onClick: () => setCurrentScreen('news'),
              className: 'w-full bg-white text-purple-600 hover:bg-purple-50 py-3 rounded-2xl font-bold mt-4'
            }, 'Zobacz wszystkie wiadomo≈õci')
          )
        :
          React.createElement('div', { className: 'text-center py-8' },
            React.createElement('p', { className: 'text-xl' }, 'Brak dostƒôpnych wiadomo≈õci')
          )
      );
    };

    const renderFunFactWidget = () => {
      return React.createElement('div', { className: 'fun-fact p-4 md:p-6 rounded-3xl shadow-xl mb-6' },
        React.createElement('div', { className: 'flex items-center mb-4' },
          React.createElement('span', { className: 'text-3xl mr-3' }, 'üí°'),
          React.createElement('h3', { className: 'text-2xl md:text-3xl font-bold text-gray-800' }, 'Ciekawostka dnia')
        ),
        
        React.createElement('div', { className: 'text-lg md:text-xl text-gray-700 italic mb-4' },
          currentFunFact || '≈Åadowanie ciekawostki...'
        ),
        
        React.createElement('div', { className: 'flex justify-between' },
          React.createElement('button', {
            onClick: () => {
              if (funFacts.length > 0) {
                const randomIndex = Math.floor(Math.random() * funFacts.length);
                setCurrentFunFact(funFacts[randomIndex]);
                addNotification('Nowa ciekawostka za≈Çadowana!');
              }
            },
            className: 'bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-2xl font-bold'
          }, 'üé≤ Nowa ciekawostka'),
          
          React.createElement('button', {
            onClick: () => {
              if (currentFunFact && navigator.share) {
                navigator.share({
                  title: 'Ciekawostka Senior-Easy',
                  text: currentFunFact,
                  url: window.location.href
                });
              } else {
                addNotification('Ciekawostka skopiowana do schowka');
                navigator.clipboard.writeText(currentFunFact);
              }
            },
            className: 'bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-2xl font-bold'
          }, 'üìã Udostƒôpnij')
        )
      );
    };

    const renderHomeScreen = () => {
      return React.createElement('div', { className: 'space-y-4 sm:space-y-6 text-center' },
        React.createElement('h1', { className: 'text-3xl sm:text-4xl md:text-5xl font-bold text-blue-600 mb-2' }, 'Senior-Easy'),
        React.createElement('p', { className: 'text-lg sm:text-xl md:text-2xl text-gray-600 mb-4' }, 'Witaj! Co chcesz zrobiƒá?'),
        
        // Widgety na g√≥rze ekranu g≈Ç√≥wnego
        renderWeatherWidget(),
        renderNewsWidget(),
        renderFunFactWidget(),
        
        React.createElement('div', { className: 'grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 md:gap-6' },
          React.createElement('button', {
            onClick: () => setCurrentScreen('video'),
            className: 'bg-green-500 hover:bg-green-600 active:bg-green-700 text-white p-6 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl shadow-2xl flex flex-col items-center justify-center space-y-2 sm:space-y-3 md:space-y-4 transition-colors min-h-[140px] sm:min-h-[160px]'
          },
            React.createElement('span', { className: 'text-4xl sm:text-5xl' }, 'üìπ'),
            React.createElement('span', { className: 'text-xl sm:text-2xl md:text-3xl font-bold' }, 'Rozmowa Wideo')
          ),
          React.createElement('button', {
            onClick: () => setCurrentScreen('medications'),
            className: 'bg-purple-500 hover:bg-purple-600 active:bg-purple-700 text-white p-6 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl shadow-2xl flex flex-col items-center justify-center space-y-2 sm:space-y-3 md:space-y-4 transition-colors min-h-[140px] sm:min-h-[160px]'
          },
            React.createElement('span', { className: 'text-4xl sm:text-5xl' }, 'üíä'),
            React.createElement('span', { className: 'text-xl sm:text-2xl md:text-3xl font-bold' }, 'Leki')
          ),
          React.createElement('button', {
            onClick: () => setCurrentScreen('contacts'),
            className: 'bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white p-6 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl shadow-2xl flex flex-col items-center justify-center space-y-2 sm:space-y-3 md:space-y-4 transition-colors min-h-[140px] sm:min-h-[160px]'
          },
            React.createElement('span', { className: 'text-4xl sm:text-5xl' }, 'üìû'),
            React.createElement('span', { className: 'text-xl sm:text-2xl md:text-3xl font-bold' }, 'Rodzina')
          ),
          React.createElement('button', {
            onClick: () => setCurrentScreen('services'),
            className: 'bg-orange-500 hover:bg-orange-600 active:bg-orange-700 text-white p-6 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl shadow-2xl flex flex-col items-center justify-center space-y-2 sm:space-y-3 md:space-y-4 transition-colors min-h-[140px] sm:min-h-[160px]'
          },
            React.createElement('span', { className: 'text-4xl sm:text-5xl' }, 'üìç'),
            React.createElement('span', { className: 'text-xl sm:text-2xl md:text-3xl font-bold' }, 'Us≈Çugi')
          )
        )
      );
    };

    const renderVideoScreen = () => {
      return React.createElement('div', { className: 'space-y-4 md:space-y-6' },
        React.createElement('h2', { className: 'text-3xl md:text-4xl font-bold text-center mb-6 md:mb-8' }, 'Rozmowa Wideo'),
        familyContacts.map(c => 
          React.createElement('button', {
            key: c.id,
            onClick: () => startVideoCall(c),
            className: 'w-full bg-white hover:bg-green-50 active:bg-green-100 border-4 border-green-500 p-6 md:p-8 rounded-3xl shadow-xl flex items-center space-x-4 md:space-x-6 mb-4 transition-colors'
          },
            React.createElement('span', { className: 'text-5xl md:text-6xl' }, c.avatar),
            React.createElement('div', { className: 'flex-1 text-left' },
              React.createElement('div', { className: 'text-2xl md:text-3xl font-bold text-gray-800' }, c.name),
              React.createElement('div', { className: 'text-lg md:text-xl text-gray-500' }, c.phone),
              React.createElement('div', { className: 'text-base md:text-lg text-gray-400' }, c.app ? `(${c.app})` : '')
            ),
            React.createElement('span', { className: 'text-4xl md:text-5xl' }, 'üìπ')
          )
        )
      );
    };

    const renderMedicationsScreen = () => {
      return React.createElement('div', { className: 'space-y-4 md:space-y-6' },
        React.createElement('h2', { className: 'text-3xl md:text-4xl font-bold text-center mb-6 md:mb-8' }, 'Przypomnienia o Lekach'),
        
        medications.map(med => {
          const today = (new Date().getDay() + 6) % 7;
          const isTodayScheduled = med.days.includes(today);
          const wasTakenToday = med.lastTaken === new Date().toDateString();
          const isAvailable = isTodayScheduled && !wasTakenToday;
          
          return React.createElement('div', {
            key: med.id,
            className: `bg-white border-4 p-4 md:p-6 rounded-3xl shadow-xl flex items-center justify-between ${!isAvailable?'border-gray-300 opacity-60':'border-purple-500'}`
          },
            editingMedication === med.id ? 
              React.createElement('div', { className: 'w-full space-y-4' },
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Nazwa leku',
                  value: newMedName,
                  onChange: e => setNewMedName(e.target.value),
                  className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
                }),
                React.createElement('input', {
                  type: 'time',
                  value: newMedTime,
                  onChange: e => setNewMedTime(e.target.value),
                  className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
                }),
                React.createElement('div', { className: 'flex flex-col space-y-3' },
                  React.createElement('div', { className: 'flex justify-between' },
                    React.createElement('span', { className: 'text-lg font-bold' }, 'Dni przyjmowania:'),
                    React.createElement('div', { className: 'flex space-x-2' },
                      React.createElement('button', {
                        onClick: selectAllDays,
                        className: 'bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-sm'
                      }, 'Wszystkie'),
                      React.createElement('button', {
                        onClick: clearDays,
                        className: 'bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded text-sm'
                      }, 'Wyczy≈õƒá')
                    )
                  ),
                  React.createElement('div', { className: 'flex justify-between' },
                    weekdays.map((day, index) =>
                      React.createElement('button', {
                        key: index,
                        onClick: () => toggleDay(index),
                        className: `weekday-button ${newMedDays.includes(index) ? 'selected' : ''}`
                      }, day)
                    )
                  )
                ),
                React.createElement('div', { className: 'flex space-x-3' },
                  React.createElement('button', {
                    onClick: () => saveEditMedication(med.id),
                    className: 'flex-1 bg-green-500 hover:bg-green-600 text-white p-3 rounded-2xl font-bold'
                  }, 'üíæ Zapisz'),
                  React.createElement('button', {
                    onClick: cancelEditMedication,
                    className: 'flex-1 bg-gray-500 hover:bg-gray-600 text-white p-3 rounded-2xl font-bold'
                  }, '‚ùå Anuluj')
                )
              )
            :
              React.createElement(React.Fragment, null,
                React.createElement('div', { className: 'flex-1' },
                  React.createElement('div', { className: 'text-2xl md:text-3xl font-bold text-gray-800' }, med.name),
                  React.createElement('div', { className: 'text-xl md:text-2xl text-gray-600' }, `Godzina: ${med.time}`),
                  React.createElement('div', { className: 'mt-2' },
                    React.createElement('div', { className: 'text-lg text-gray-500' }, 'Dni:'),
                    React.createElement('div', { className: 'flex space-x-1' },
                      weekdays.map((day, index) =>
                        React.createElement('span', {
                          key: index,
                          className: `text-sm ${med.days.includes(index) ? 'font-bold text-purple-600' : 'text-gray-400'}`
                        }, day)
                      )
                    )
                  )
                ),
                React.createElement('div', { className: 'flex space-x-2 md:space-x-3' },
                  isAvailable ? 
                    React.createElement('button', {
                      onClick: () => markMedicationTaken(med.id),
                      className: 'bg-green-500 hover:bg-green-600 active:bg-green-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-2xl'
                    }, '‚úÖ')
                  :
                    React.createElement('div', { 
                      className: 'bg-gray-300 text-white p-3 md:p-4 rounded-2xl text-2xl',
                      title: wasTakenToday ? 'Przyjƒôty dzisiaj' : 'Nie zaplanowany na dzisiaj'
                    }, '‚úÖ'),
                  React.createElement('button', {
                    onClick: () => startEditMedication(med),
                    className: 'bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-2xl'
                  }, '‚úèÔ∏è'),
                  React.createElement('button', {
                    onClick: () => deleteMedication(med.id),
                    className: 'bg-red-500 hover:bg-red-600 active:bg-red-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-2xl'
                  }, 'üóëÔ∏è')
                )
              )
          );
        }),

        React.createElement('div', { className: 'bg-blue-50 border-4 border-blue-300 p-4 md:p-6 rounded-3xl space-y-4' },
          React.createElement('h3', { className: 'text-xl md:text-2xl font-bold text-center' }, 'Dodaj Nowy Lek'),
          React.createElement('input', {
            type: 'text',
            placeholder: 'Nazwa leku',
            value: newMedName,
            onChange: e => setNewMedName(e.target.value),
            className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
          }),
          React.createElement('input', {
            type: 'time',
            value: newMedTime,
            onChange: e => setNewMedTime(e.target.value),
            className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
          }),
          React.createElement('div', { className: 'flex flex-col space-y-3' },
            React.createElement('div', { className: 'flex justify-between' },
              React.createElement('span', { className: 'text-lg font-bold' }, 'Dni przyjmowania:'),
              React.createElement('div', { className: 'flex space-x-2' },
                React.createElement('button', {
                  onClick: selectAllDays,
                  className: 'bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-sm'
                }, 'Wszystkie'),
                React.createElement('button', {
                  onClick: clearDays,
                  className: 'bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded text-sm'
                }, 'Wyczy≈õƒá')
              )
            ),
            React.createElement('div', { className: 'flex justify-between' },
              weekdays.map((day, index) =>
                React.createElement('button', {
                  key: index,
                  onClick: () => toggleDay(index),
                  className: `weekday-button ${newMedDays.includes(index) ? 'selected' : ''}`
                }, day)
              )
            )
          ),
          React.createElement('button', {
            onClick: addMedication,
            className: 'w-full bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white text-xl md:text-2xl font-bold p-3 md:p-4 rounded-2xl transition-colors'
          }, '‚ûï Dodaj')
        )
      );
    };
  
    const renderContactsScreen = () => {
      return React.createElement('div', { className: 'space-y-4 md:space-y-6' },
        React.createElement('h2', { className: 'text-3xl md:text-4xl font-bold text-center mb-6 md:mb-8' }, 'Kontakty Rodzinne'),
        
        familyContacts.map(c =>
          React.createElement('div', {
            key: c.id,
            className: 'bg-white border-4 border-blue-500 p-4 md:p-6 rounded-3xl shadow-xl mb-4'
          },
            editingContact === c.id ?
              React.createElement('div', { className: 'space-y-4' },
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Imiƒô i nazwisko',
                  value: newContactName,
                  onChange: e => setNewContactName(e.target.value),
                  className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
                }),
                React.createElement('input', {
                  type: 'tel',
                  placeholder: 'Numer telefonu z +48',
                  value: newContactPhone,
                  onChange: e => setNewContactPhone(e.target.value),
                  className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
                }),
                React.createElement('select', {
                  value: newContactApp,
                  onChange: e => setNewContactApp(e.target.value),
                  className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
                },
                  React.createElement('option', { value: '' }, 'Brak aplikacji'),
                  React.createElement('option', { value: 'whatsapp' }, 'WhatsApp'),
                  React.createElement('option', { value: 'viber' }, 'Viber')
                ),
                React.createElement('div', { className: 'flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3' },
                  React.createElement('button', {
                    onClick: () => saveEditContact(c.id),
                    className: 'flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-lg'
                  }, 'üíæ Zapisz'),
                  React.createElement('button', {
                    onClick: cancelEditContact,
                    className: 'flex-1 bg-gray-500 hover:bg-gray-600 active:bg-gray-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-lg'
                  }, '‚ùå Anuluj')
                )
              )
            :
              React.createElement(React.Fragment, null,
                React.createElement('div', { className: 'flex items-center space-x-4 md:space-x-6 mb-4' },
                  React.createElement('span', { className: 'text-5xl md:text-6xl' }, c.avatar),
                  React.createElement('div', { className: 'flex-1' },
                    React.createElement('div', { className: 'text-2xl md:text-3xl font-bold text-gray-800' }, c.name),
                    React.createElement('div', { className: 'text-lg md:text-xl text-gray-500' }, c.phone),
                    React.createElement('div', { className: 'text-base md:text-lg text-gray-400' }, c.app ? `(${c.app})` : '')
                  )
                ),
                React.createElement('div', { className: 'flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3' },
                  React.createElement('button', {
                    onClick: () => makeCall(c),
                    className: 'flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white p-3 md:p-4 rounded-2xl flex items-center justify-center transition-colors text-lg'
                  }, 'üìû Zadzwo≈Ñ'),
                  React.createElement('button', {
                    onClick: () => startVideoCall(c),
                    className: 'flex-1 bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white p-3 md:p-4 rounded-2xl flex items-center justify-center transition-colors text-lg'
                  }, 'üé• Wideo')
                ),
                React.createElement('div', { className: 'flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3 mt-3' },
                  React.createElement('button', {
                    onClick: () => startEditContact(c),
                    className: 'flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-lg'
                  }, '‚úèÔ∏è Edytuj'),
                  React.createElement('button', {
                    onClick: () => deleteContact(c.id),
                    className: 'flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-lg'
                  }, 'üóëÔ∏è Usu≈Ñ')
                )
              )
          )
        ),

        React.createElement('div', { className: 'bg-blue-50 border-4 border-blue-300 p-4 md:p-6 rounded-3xl space-y-4' },
          React.createElement('h3', { className: 'text-xl md:text-2xl font-bold text-center' }, 'Dodaj Kontakt'),
          React.createElement('input', {
            type: 'text',
            placeholder: 'Imiƒô i nazwisko',
            value: newContactName,
            onChange: e => setNewContactName(e.target.value),
            className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
          }),
          React.createElement('input', {
            type: 'tel',
            placeholder: 'Numer telefonu z +48',
            value: newContactPhone,
            onChange: e => setNewContactPhone(e.target.value),
            className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
          }),
          React.createElement('select', {
            value: newContactApp,
            onChange: e => setNewContactApp(e.target.value),
            className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
          },
            React.createElement('option', { value: '' }, 'Brak aplikacji'),
            React.createElement('option', { value: 'whatsapp' }, 'WhatsApp'),
            React.createElement('option', { value: 'viber' }, 'Viber')
          ),
          React.createElement('button', {
            onClick: addContact,
            className: 'w-full bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white text-xl md:text-2xl font-bold p-3 md:p-4 rounded-2xl transition-colors'
          }, '‚ûï Dodaj Kontakt')
        )
      );
    };

    const renderServicesScreen = () => {
      return React.createElement('div', { className: 'space-y-4 md:space-y-6' },
        React.createElement('h2', { className: 'text-3xl md:text-4xl font-bold text-center mb-6 md:mb-8' }, 'Lokalne Us≈Çugi'),
        
        localServices.map(s =>
          React.createElement('div', {
            key: s.id,
            className: 'bg-white border-4 border-orange-500 p-4 md:p-6 rounded-3xl shadow-xl mb-4'
          },
            editingService === s.id ?
              React.createElement('div', { className: 'space-y-4' },
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Nazwa',
                  value: newServiceName,
                  onChange: e => setNewServiceName(e.target.value),
                  className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
                }),
                React.createElement('input', {
                  type: 'tel',
                  placeholder: 'Telefon',
                  value: newServicePhone,
                  onChange: e => setNewServicePhone(e.target.value),
                  className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
                }),
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Emoji/Ikona',
                  value: newServiceIcon,
                  onChange: e => setNewServiceIcon(e.target.value),
                  className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
                }),
                React.createElement('div', { className: 'flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3' },
                  React.createElement('button', {
                    onClick: () => saveEditService(s.id),
                    className: 'flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-lg'
                  }, 'üíæ Zapisz'),
                  React.createElement('button', {
                    onClick: cancelEditService,
                    className: 'flex-1 bg-gray-500 hover:bg-gray-600 active:bg-gray-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-lg'
                  }, '‚ùå Anuluj')
                )
              )
            :
              React.createElement(React.Fragment, null,
                React.createElement('div', { className: 'flex items-center space-x-4 md:space-x-6 mb-4' },
                  React.createElement('span', { className: 'text-5xl md:text-6xl' }, s.icon),
                  React.createElement('div', { className: 'flex-1 text-left' },
                    React.createElement('div', { className: 'text-2xl md:text-3xl font-bold text-gray-800' }, s.name),
                    React.createElement('div', { className: 'text-lg md:text-xl text-gray-500' }, s.phone)
                  )
                ),
                React.createElement('div', { className: 'flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3' },
                  React.createElement('button', {
                    onClick: () => makeCall(s),
                    className: 'flex-1 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white p-3 md:p-4 rounded-2xl flex items-center justify-center transition-colors text-lg'
                  }, 'üìû Zadzwo≈Ñ')
                ),
                React.createElement('div', { className: 'flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3 mt-3' },
                  React.createElement('button', {
                    onClick: () => startEditService(s),
                    className: 'flex-1 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-lg'
                  }, '‚úèÔ∏è Edytuj'),
                  React.createElement('button', {
                    onClick: () => deleteService(s.id),
                    className: 'flex-1 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white p-3 md:p-4 rounded-2xl transition-colors text-lg'
                  }, 'üóëÔ∏è Usu≈Ñ')
                )
              )
          )
        ),

        React.createElement('div', { className: 'bg-orange-50 border-4 border-orange-300 p-4 md:p-6 rounded-3xl space-y-4' },
          React.createElement('h3', { className: 'text-xl md:text-2xl font-bold text-center' }, 'Dodaj Us≈Çugƒô'),
          React.createElement('input', {
            type: 'text',
            placeholder: 'Nazwa',
            value: newServiceName,
            onChange: e => setNewServiceName(e.target.value),
            className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
          }),
          React.createElement('input', {
            type: 'tel',
            placeholder: 'Telefon',
            value: newServicePhone,
            onChange: e => setNewServicePhone(e.target.value),
            className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
          }),
          React.createElement('input', {
            type: 'text',
            placeholder: 'Emoji/Ikona',
            value: newServiceIcon,
            onChange: e => setNewServiceIcon(e.target.value),
            className: 'w-full text-xl md:text-2xl p-3 md:p-4 border-2 border-gray-300 rounded-2xl'
          }),
          React.createElement('button', {
            onClick: addService,
            className: 'w-full bg-orange-500 hover:bg-orange-600 active:bg-orange-700 text-white text-xl md:text-2xl font-bold p-3 md:p-4 rounded-2xl transition-colors'
          }, '‚ûï Dodaj Us≈Çugƒô')
        )
      );
    };

    const renderNotificationsScreen = () => {
      return React.createElement('div', { className: 'space-y-4 md:space-y-6' },
        React.createElement('h2', { className: 'text-3xl md:text-4xl font-bold text-center mb-6 md:mb-8' }, 'Powiadomienia'),
        
        React.createElement('div', { className: 'bg-blue-50 border-4 border-blue-300 p-4 rounded-3xl' },
          React.createElement('div', { className: 'flex justify-between items-center mb-3' },
            React.createElement('div', { className: 'text-lg font-bold text-gray-800' },
              `≈ÅƒÖcznie: ${notifications.length} powiadomie≈Ñ`
            ),
            React.createElement('div', { className: 'text-lg font-bold text-orange-600' },
              `Nieprzeczytane: ${unreadNotificationsCount}`
            )
          ),
          
          notifications.length > 0 && React.createElement('div', { className: 'grid grid-cols-1 sm:grid-cols-2 gap-2' },
            React.createElement('button', {
              onClick: () => {
                setNotifications(prev => prev.map(n => ({...n, read: true})));
                addNotification('Wszystkie powiadomienia oznaczone jako przeczytane');
              },
              className: 'bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-2xl font-bold flex items-center justify-center space-x-2'
            },
              React.createElement('span', null, 'üìñ'),
              React.createElement('span', null, 'Oznacz jako przeczytane')
            ),
            React.createElement('button', {
              onClick: () => {
                if (notifications.length === 0) return;
                if (confirm(`Czy na pewno chcesz usunƒÖƒá wszystkie powiadomienia (${notifications.length})?`)) {
                  setNotifications([]);
                  addNotification('Wszystkie powiadomienia zosta≈Çy wyczyszczone');
                }
              },
              className: 'bg-red-500 hover:bg-red-600 text-white p-3 rounded-2xl font-bold flex items-center justify-center space-x-2'
            },
              React.createElement('span', null, 'üóëÔ∏è'),
              React.createElement('span', null, 'Wyczy≈õƒá wszystkie')
            )
          )
        ),
        
        notifications.length === 0 ?
          React.createElement('div', { className: 'text-center py-12' },
            React.createElement('div', { className: 'text-6xl mb-4' }, 'üì≠'),
            React.createElement('p', { className: 'text-2xl text-gray-500 mb-2' }, 'Brak powiadomie≈Ñ'),
            React.createElement('p', { className: 'text-lg text-gray-400' }, 'Wszystkie powiadomienia zosta≈Çy wyczyszczone')
          )
        :
          React.createElement('div', { className: 'space-y-4' },
            notifications.map(notif =>
              React.createElement('div', {
                key: notif.id,
                className: `bg-white border-4 p-4 md:p-6 rounded-3xl shadow-xl transition-all duration-300 ${
                  notif.read ? 'border-gray-300 opacity-75' : 'border-yellow-400'
                }`
              },
                React.createElement('div', { className: 'flex justify-between items-start' },
                  React.createElement('div', { className: 'flex-1' },
                    React.createElement('p', { className: `text-lg md:text-xl ${notif.read ? 'text-gray-600' : 'text-gray-800 font-bold'}` }, notif.text),
                    React.createElement('p', { className: 'text-sm text-gray-500 mt-2 flex items-center space-x-2' },
                      React.createElement('span', null, 'üïí'),
                      React.createElement('span', null, notif.time)
                    )
                  ),
                  React.createElement('div', { className: 'flex flex-col space-y-2 ml-4' },
                    !notif.read && React.createElement('span', { 
                      className: 'bg-yellow-400 text-white px-3 py-1 rounded-full text-sm font-bold animate-pulse'
                    }, 'NOWE'),
                    React.createElement('button', {
                      onClick: () => {
                        if (confirm('Czy na pewno chcesz usunƒÖƒá to powiadomienie?')) {
                          setNotifications(prev => prev.filter(notification => notification.id !== notif.id));
                        }
                      },
                      className: 'bg-red-500 hover:bg-red-600 text-white p-2 rounded-full text-sm transition-colors'
                    }, 'üóëÔ∏è')
                  )
                )
              )
            )
          )
      );
    };

    // DODANY EKRAN Z WIADOMO≈öCIAMI
    const renderNewsScreen = () => {
      return React.createElement('div', { className: 'space-y-6' },
        React.createElement('div', { className: 'flex items-center justify-between mb-6' },
          React.createElement('button', {
            onClick: () => setCurrentScreen('home'),
            className: 'bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-2xl'
          }, '‚Üê Wr√≥ƒá'),
          React.createElement('h2', { className: 'text-3xl font-bold text-center flex-1' }, 'üì∞ Wszystkie Wiadomo≈õci'),
          React.createElement('button', {
            onClick: fetchNews,
            className: 'bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-2xl',
            disabled: newsLoading
          }, newsLoading ? '...' : 'üîÑ')
        ),
        
        newsLoading ?
          React.createElement('div', { className: 'text-center py-12' },
            React.createElement('div', { className: 'loading-spinner mx-auto mb-4' }),
            React.createElement('p', { className: 'text-xl' }, '≈Åadowanie wiadomo≈õci...')
          )
        : news.length > 0 ?
          React.createElement('div', { className: 'space-y-4' },
            news.map(item =>
              React.createElement('div', {
                key: item.id,
                className: 'bg-white border-4 border-purple-200 p-6 rounded-3xl shadow-lg'
              },
                React.createElement('div', { className: 'flex justify-between items-center mb-3' },
                  React.createElement('span', { className: 'bg-purple-100 text-purple-800 px-3 py-1 rounded-full font-bold' }, item.category),
                  React.createElement('div', { className: 'text-gray-500 text-sm' },
                    React.createElement('span', { className: 'mr-3' }, `üïí ${item.time}`),
                    React.createElement('span', null, `üì∞ ${item.source}`)
                  )
                ),
                React.createElement('h3', { className: 'text-2xl font-bold text-gray-800 mb-3' }, item.title),
                React.createElement('p', { className: 'text-gray-600 mb-4' }, item.description),
                React.createElement('button', {
                  onClick: () => {
                    addNotification(`Otwieram artyku≈Ç: "${item.title}"`);
                  },
                  className: 'w-full bg-purple-500 hover:bg-purple-600 text-white py-3 rounded-2xl font-bold'
                }, 'üìñ Czytaj wiƒôcej')
              )
            )
          )
        :
          React.createElement('div', { className: 'text-center py-12' },
            React.createElement('div', { className: 'text-6xl mb-4' }, 'üì∞'),
            React.createElement('p', { className: 'text-2xl text-gray-600 mb-2' }, 'Brak wiadomo≈õci'),
            React.createElement('p', { className: 'text-lg text-gray-500' }, 'Spr√≥buj od≈õwie≈ºyƒá za chwilƒô')
          )
      );
    };

    const renderSettingsScreen = () => {
      return React.createElement('div', { className: 'space-y-6' },
        React.createElement('h2', { className: 'text-3xl md:text-4xl font-bold text-center mb-6 md:mb-8' }, 'Ustawienia'),
        
        React.createElement('div', { className: 'bg-white border-4 border-blue-500 p-6 md:p-8 rounded-3xl shadow-xl' },
          React.createElement('div', { className: 'flex items-center justify-between mb-6' },
            React.createElement('div', { className: 'flex-1 pr-4' },
              React.createElement('div', { className: 'text-2xl md:text-3xl font-bold text-gray-800' }, 'Tryb Opieki Rodzinnej'),
              React.createElement('div', { className: 'text-lg md:text-xl text-gray-600 mt-2' }, 'Rodzina otrzymuje powiadomienia')
            ),
            React.createElement('button', {
              onClick: () => setCareMode(!careMode),
              className: `w-24 md:w-32 h-12 md:h-16 rounded-full transition-all ${careMode?'bg-green-500':'bg-gray-300'} relative flex-shrink-0`
            },
              React.createElement('div', {
                className: `w-8 md:w-12 h-8 md:h-12 bg-white rounded-full absolute top-2 transition-all ${careMode?'left-12 md:left-16':'left-2'}`
              })
            )
          ),
          React.createElement('div', { className: 'text-lg md:text-xl text-gray-600 bg-blue-50 p-4 rounded-2xl' },
            careMode ? '‚úì Tryb aktywny - rodzina jest informowana' : '‚úó Tryb wy≈ÇƒÖczony'
          )
        ),

        React.createElement('div', { className: 'bg-white border-4 border-red-500 p-6 md:p-8 rounded-3xl shadow-xl' },
          React.createElement('div', { className: 'flex items-center justify-between mb-6' },
            React.createElement('div', { className: 'flex-1 pr-4' },
              React.createElement('div', { className: 'text-2xl md:text-3xl font-bold text-gray-800' }, 'Przycisk Awaryjny'),
              React.createElement('div', { className: 'text-lg md:text-xl text-gray-600 mt-2' }, 'Dostosuj wyglƒÖd, wiadomo≈õci i telefony alarmowe')
            ),
            React.createElement('button', {
              onClick: () => setShowEmergencySettings(true),
              className: 'bg-red-500 hover:bg-red-600 text-white p-4 rounded-2xl font-bold text-lg'
            }, 'Konfiguruj')
          ),
          React.createElement('div', { className: 'text-lg md:text-xl text-gray-600 bg-red-50 p-4 rounded-2xl' },
            `${emergencySettings.enabled ? '‚úì Przycisk aktywny' : '‚úó Przycisk wy≈ÇƒÖczony'} | Rozmiar: ${emergencySettings.size}px | Kolor: ${emergencySettings.color === 'red' ? 'Czerwony' : emergencySettings.color === 'blue' ? 'Niebieski' : 'Pomara≈Ñczowy'}`
          )
        ),

        React.createElement('div', { className: 'bg-white border-4 border-green-500 p-6 md:p-8 rounded-3xl shadow-xl' },
          React.createElement('div', { className: 'flex items-center justify-between mb-6' },
            React.createElement('div', { className: 'flex-1 pr-4' },
              React.createElement('div', { className: 'text-2xl md:text-3xl font-bold text-gray-800' }, 'Instalacja Aplikacji'),
              React.createElement('div', { className: 'text-lg md:text-xl text-gray-600 mt-2' }, 'Zainstaluj aplikacjƒô na swoim urzƒÖdzeniu')
            ),
            React.createElement('button', {
              onClick: handleInstallClick,
              className: 'bg-green-500 hover:bg-green-600 text-white p-4 rounded-2xl font-bold text-lg',
              disabled: !isInstallable
            }, isInstallable ? 'Zainstaluj' : 'Niedostƒôpne')
          ),
          React.createElement('div', { className: 'text-lg md:text-xl text-gray-600 bg-green-50 p-4 rounded-2xl' },
            isInstallable 
              ? 'Zainstaluj Senior-Easy na swoim urzƒÖdzeniu, aby korzystaƒá z aplikacji jak z natywnej!'
              : 'Instalacja jest ju≈º dostƒôpna lub aplikacja jest ju≈º zainstalowana. Sprawd≈∫ menu przeglƒÖdarki.'
          )
        ),

        React.createElement('div', { className: 'bg-white border-4 border-yellow-500 p-6 md:p-8 rounded-3xl shadow-xl' },
          React.createElement('div', { className: 'flex items-center justify-between mb-6' },
            React.createElement('div', { className: 'flex-1 pr-4' },
              React.createElement('div', { className: 'text-2xl md:text-3xl font-bold text-gray-800' }, 'Powiadomienia'),
              React.createElement('div', { className: 'text-lg md:text-xl text-gray-600 mt-2' }, 'ZarzƒÖdzaj powiadomieniami')
            ),
            React.createElement('button', {
              onClick: () => setCurrentScreen('notifications'),
              className: 'bg-yellow-500 hover:bg-yellow-600 text-white p-4 rounded-2xl font-bold text-lg relative'
            },
              'üì¢',
              unreadNotificationsCount > 0 && React.createElement('span', { className: 'notification-badge' }, unreadNotificationsCount)
            )
          ),
          React.createElement('div', { className: 'text-lg md:text-xl text-gray-600 bg-yellow-50 p-4 rounded-2xl' },
            `Masz ${unreadNotificationsCount} nieprzeczytanych powiadomie≈Ñ`
          )
        ),

        React.createElement('div', { className: 'bg-white border-4 border-red-500 p-6 md:p-8 rounded-3xl shadow-xl' },
          React.createElement('div', { className: 'flex items-center justify-between mb-6' },
            React.createElement('div', { className: 'flex-1 pr-4' },
              React.createElement('div', { className: 'text-2xl md:text-3xl font-bold text-gray-800' }, 'Wyczy≈õƒá wszystkie dane'),
              React.createElement('div', { className: 'text-lg md:text-xl text-gray-600 mt-2' }, 'Usu≈Ñ wszystkie zapisane leki, kontakty i ustawienia')
            ),
            React.createElement('button', {
              onClick: clearData,
              className: 'bg-red-500 hover:bg-red-600 text-white p-4 rounded-2xl font-bold text-lg'
            }, 'Wyczy≈õƒá')
          ),
          React.createElement('div', { className: 'text-lg md:text-xl text-gray-600 bg-red-50 p-4 rounded-2xl' },
            'Uwaga: Ta operacja jest nieodwracalna! Wszystkie dane zostanƒÖ trwale usuniƒôte.'
          )
        ),

        React.createElement('div', { className: 'bg-purple-50 border-4 border-purple-300 p-6 md:p-8 rounded-3xl' },
          React.createElement('h3', { className: 'text-2xl md:text-3xl font-bold text-center mb-4' }, 'Informacje o Aplikacji'),
          React.createElement('div', { className: 'space-y-3 text-lg md:text-xl text-gray-700' },
            React.createElement('p', null, React.createElement('strong', null, 'Wersja:'), ' 3.0 PWA'),
            React.createElement('p', null, React.createElement('strong', null, 'Typ:'), ' Progressive Web App'),
            React.createElement('p', null, React.createElement('strong', null, 'Wsparcie:'), ' +480 800 800'),
            React.createElement('p', { className: 'text-base md:text-lg text-gray-600 mt-4' },
              'Aplikacja dzia≈Ça offline i mo≈ºe byƒá zainstalowana na urzƒÖdzeniu mobilnym lub komputerze.'
            )
          )
        )
      );
    };

    const renderEmergencySettings = () => {
      if (!showEmergencySettings) return null;

      return React.createElement('div', {
        className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4',
        onClick: () => setShowEmergencySettings(false)
      },
        React.createElement('div', {
          className: 'bg-white rounded-3xl shadow-2xl max-w-2xl w-full p-6 md:p-8 max-h-[90vh] overflow-y-auto',
          onClick: e => e.stopPropagation()
        },
          React.createElement('h3', { className: 'text-2xl md:text-3xl font-bold text-center mb-6 text-red-600' }, 'Ustawienia Przycisku Awaryjnego'),
          
          React.createElement('div', { className: 'flex mb-6 border-b space-x-2' },
            React.createElement('button', {
              className: `px-4 py-2 rounded-t ${emergencySettingsTab === 'appearance' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`,
              onClick: () => setEmergencySettingsTab('appearance')
            }, 'WyglƒÖd'),
            React.createElement('button', {
              className: `px-4 py-2 rounded-t ${emergencySettingsTab === 'messages' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`,
              onClick: () => setEmergencySettingsTab('messages')
            }, 'Wiadomo≈õci'),
            React.createElement('button', {
              className: `px-4 py-2 rounded-t ${emergencySettingsTab === 'phones' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`,
              onClick: () => setEmergencySettingsTab('phones')
            }, 'Telefony')
          ),
          
          emergencySettingsTab === 'appearance' && React.createElement('div', { className: 'space-y-6' },
            React.createElement('div', { className: 'flex items-center justify-between' },
              React.createElement('span', { className: 'text-xl font-bold' }, 'W≈ÇƒÖczony'),
              React.createElement('button', {
                onClick: () => updateEmergencySettings('enabled', !emergencySettings.enabled),
                className: `w-16 h-8 rounded-full transition-all ${emergencySettings.enabled ? 'bg-green-500' : 'bg-gray-300'} relative`
              },
                React.createElement('div', {
                  className: `w-6 h-6 bg-white rounded-full absolute top-1 transition-all ${emergencySettings.enabled ? 'left-9' : 'left-1'}`
                })
              )
            ),
            React.createElement('div', null,
              React.createElement('label', { className: 'text-xl font-bold mb-2 block' }, 'Pozycja przycisku'),
              React.createElement('select', {
                value: emergencySettings.position,
                onChange: e => updateEmergencySettings('position', e.target.value),
                className: 'w-full text-xl p-3 border-2 border-gray-300 rounded-2xl'
              },
                React.createElement('option', { value: 'bottom-right' }, 'Prawy dolny r√≥g'),
                React.createElement('option', { value: 'bottom-left' }, 'Lewy dolny r√≥g'),
                React.createElement('option', { value: 'top-right' }, 'Prawy g√≥rny r√≥g'),
                React.createElement('option', { value: 'top-left' }, 'Lewy g√≥rny r√≥g')
              )
            ),
            React.createElement('div', null,
              React.createElement('label', { className: 'text-xl font-bold mb-2 block' }, `Rozmiar przycisku: ${emergencySettings.size}px`),
              React.createElement('input', {
                type: 'range',
                min: '50',
                max: '100',
                value: emergencySettings.size,
                onChange: e => updateEmergencySettings('size', parseInt(e.target.value)),
                className: 'w-full'
              })
            ),
            React.createElement('div', null,
              React.createElement('label', { className: 'text-xl font-bold mb-2 block' }, 'Kolor przycisku'),
              React.createElement('div', { className: 'flex space-x-4' },
                ['red', 'blue', 'orange'].map(color =>
                  React.createElement('button', {
                    key: color,
                    onClick: () => updateEmergencySettings('color', color),
                    className: `w-12 h-12 rounded-full ${emergencySettings.color === color ? 'ring-4 ring-blue-500' : ''} ${
                      color === 'red' ? 'bg-red-500' : 
                      color === 'blue' ? 'bg-blue-500' : 
                      'bg-orange-500'
                    }`
                  })
                )
              )
            ),
            React.createElement('div', { className: 'flex items-center justify-between' },
              React.createElement('span', { className: 'text-xl font-bold' }, 'Efekt pulsowania'),
              React.createElement('button', {
                onClick: () => updateEmergencySettings('pulse', !emergencySettings.pulse),
                className: `w-16 h-8 rounded-full transition-all ${emergencySettings.pulse ? 'bg-green-500' : 'bg-gray-300'} relative`
              },
                React.createElement('div', {
                  className: `w-6 h-6 bg-white rounded-full absolute top-1 transition-all ${emergencySettings.pulse ? 'left-9' : 'left-1'}`
                })
              )
            )
          ),

          emergencySettingsTab === 'messages' && React.createElement('div', { className: 'space-y-4' },
            React.createElement('h4', { className: 'text-lg font-bold' }, 'Wiadomo≈õci awaryjne'),
            React.createElement('div', null,
              React.createElement('label', { className: 'text-lg font-bold mb-1 block' }, 'Wiadomo≈õƒá dla rodziny'),
              React.createElement('textarea', {
                value: emergencySettings.familyMessage,
                onChange: e => updateEmergencySettings('familyMessage', e.target.value),
                className: 'w-full p-3 border-2 border-gray-300 rounded-2xl',
                rows: 2
              })
            ),
            React.createElement('div', null,
              React.createElement('label', { className: 'text-lg font-bold mb-1 block' }, 'Wiadomo≈õƒá medyczna'),
              React.createElement('textarea', {
                value: emergencySettings.medicalMessage,
                onChange: e => updateEmergencySettings('medicalMessage', e.target.value),
                className: 'w-full p-3 border-2 border-gray-300 rounded-2xl',
                rows: 2
              })
            ),
            React.createElement('div', null,
              React.createElement('label', { className: 'text-lg font-bold mb-1 block' }, 'Wiadomo≈õƒá dla s≈Çu≈ºb'),
              React.createElement('textarea', {
                value: emergencySettings.servicesMessage,
                onChange: e => updateEmergencySettings('servicesMessage', e.target.value),
                className: 'w-full p-3 border-2 border-gray-300 rounded-2xl',
                rows: 2
              })
            )
          ),

          emergencySettingsTab === 'phones' && React.createElement('div', { className: 'space-y-6' },
            React.createElement('h4', { className: 'text-lg font-bold' }, 'Numery telefon√≥w alarmowych'),
            React.createElement('div', null,
              React.createElement('label', { className: 'text-lg font-bold mb-2 block' }, 'Wybierz typ telefon√≥w:'),
              React.createElement('select', {
                value: editingPhoneType,
                onChange: e => setEditingPhoneType(e.target.value),
                className: 'w-full text-xl p-3 border-2 border-gray-300 rounded-2xl'
              },
                React.createElement('option', { value: 'family' }, 'Rodzina'),
                React.createElement('option', { value: 'medical' }, 'Medyczne'),
                React.createElement('option', { value: 'services' }, 'S≈Çu≈ºby')
              )
            ),
            React.createElement('div', { className: 'flex space-x-2' },
              React.createElement('input', {
                type: 'text',
                placeholder: 'Wprowad≈∫ numer telefonu',
                value: newPhoneNumber,
                onChange: e => setNewPhoneNumber(e.target.value),
                className: 'flex-1 p-3 border-2 border-gray-300 rounded-2xl'
              }),
              React.createElement('button', {
                onClick: addPhoneNumber,
                className: 'bg-green-500 hover:bg-green-600 text-white p-3 rounded-2xl font-bold'
              }, '+')
            ),
            React.createElement('div', null,
              React.createElement('label', { className: 'text-lg font-bold mb-2 block' },
                editingPhoneType === 'family' && 'Numery rodziny',
                editingPhoneType === 'medical' && 'Numery medyczne',
                editingPhoneType === 'services' && 'Numery s≈Çu≈ºb'
              ),
              React.createElement('div', { className: 'border rounded-2xl p-3 max-h-48 overflow-y-auto' },
                emergencySettings[`${editingPhoneType}Phones`]?.length > 0 ?
                  emergencySettings[`${editingPhoneType}Phones`].map((phone, index) =>
                    React.createElement('div', { key: index, className: 'flex justify-between items-center p-2 border-b last:border-0' },
                      React.createElement('span', { className: 'font-mono' }, phone),
                      React.createElement('button', {
                        onClick: () => removePhoneNumber(index, editingPhoneType),
                        className: 'bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm'
                      }, 'Usu≈Ñ')
                    )
                  )
                :
                  React.createElement('p', { className: 'text-gray-500 text-center py-4' }, 'Brak zapisanych numer√≥w')
              )
            ),
            React.createElement('div', { className: 'bg-blue-50 p-4 rounded-2xl' },
              React.createElement('p', { className: 'text-sm text-blue-800' },
                React.createElement('strong', null, 'Uwaga:'), ' W przypadku aktywacji pomocy, aplikacja zadzwoni pod pierwszy numer z listy.'
              )
            )
          ),

          React.createElement('button', {
            onClick: () => setShowEmergencySettings(false),
            className: 'w-full bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-2xl font-bold text-xl mt-6'
          }, 'Zapisz i zamknij')
        )
      );
    };

    const renderNotifyDialog = () => {
      if (!showNotifyDialog || !selectedMedication) return null;

      const familyWithApps = familyContacts.filter(c => c.app === 'whatsapp' || c.app === 'viber');

      return React.createElement('div', {
        className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4',
        onClick: () => { setShowNotifyDialog(false); setSelectedMedication(null); }
      },
        React.createElement('div', {
          className: 'bg-white rounded-3xl shadow-2xl max-w-2xl w-full p-6 md:p-8 max-h-[90vh] overflow-y-auto',
          onClick: e => e.stopPropagation()
        },
          React.createElement('h3', { className: 'text-2xl md:text-3xl font-bold text-center mb-4 text-green-600' }, '‚úÖ Lek przyjƒôty!'),
          React.createElement('p', { className: 'text-xl md:text-2xl text-center mb-6 text-gray-700' },
            `Kogo chcesz powiadomiƒá o przyjƒôciu leku "${selectedMedication.name}"?`
          ),
          
          familyWithApps.length > 0 ?
            React.createElement(React.Fragment, null,
              React.createElement('div', { className: 'space-y-3 mb-6' },
                familyWithApps.map(contact =>
                  React.createElement('button', {
                    key: contact.id,
                    onClick: () => sendNotification(contact.id),
                    className: 'w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white p-4 md:p-6 rounded-2xl shadow-lg flex items-center space-x-4 transition-all'
                  },
                    React.createElement('span', { className: 'text-4xl md:text-5xl' }, contact.avatar),
                    React.createElement('div', { className: 'flex-1 text-left' },
                      React.createElement('div', { className: 'text-xl md:text-2xl font-bold' }, contact.name),
                      React.createElement('div', { className: 'text-base md:text-lg opacity-90' },
                        contact.app === 'whatsapp' ? 'üì± WhatsApp' : 'üí¨ Viber'
                      )
                    ),
                    React.createElement('span', { className: 'text-3xl md:text-4xl' }, '‚úâÔ∏è')
                  )
                )
              ),
              familyWithApps.length > 1 && React.createElement('button', {
                onClick: sendToAll,
                className: 'w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white p-4 md:p-6 rounded-2xl shadow-lg font-bold text-xl md:text-2xl mb-4 transition-all'
              }, 'üì¢ Wy≈õlij do wszystkich')
            )
          :
            React.createElement('div', { className: 'bg-yellow-50 border-4 border-yellow-400 p-6 rounded-2xl text-center' },
              React.createElement('p', { className: 'text-xl md:text-2xl font-bold text-yellow-800 mb-2' }, '‚ö†Ô∏è Brak kontakt√≥w'),
              React.createElement('p', { className: 'text-lg md:text-xl text-yellow-700' },
                'Dodaj cz≈Çonk√≥w rodziny z WhatsApp lub Viber w zak≈Çadce "Rodzina"'
              )
            ),

          React.createElement('button', {
            onClick: () => { setShowNotifyDialog(false); setSelectedMedication(null); },
            className: 'w-full bg-gray-400 hover:bg-gray-500 text-white p-4 md:p-5 rounded-2xl font-bold text-xl md:text-2xl transition-colors'
          }, '‚ùå Nie wysy≈Çaj')
        )
      );
    };
  
    if (isLoading) {
      return React.createElement('div', { className: 'loading-screen' },
        React.createElement('div', { className: 'loading-spinner' }),
        React.createElement('h1', { className: 'text-4xl font-bold text-white mb-4' }, 'Senior-Easy'),
        React.createElement('p', { className: 'text-white text-xl' }, '≈Åadowanie aplikacji...')
      );
    }

    return React.createElement('div', null,
      emergencySettings.enabled && React.createElement('button', {
        className: 'emergency-button',
        onClick: () => setShowEmergencyDialog(true),
        style: getEmergencyButtonStyle()
      }, 'SOS'),

      showEmergencyDialog && React.createElement('div', { 
        className: 'fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50',
        onClick: () => setShowEmergencyDialog(false)
      },
        React.createElement('div', {
          className: 'bg-white rounded-3xl p-6 w-11/12 max-w-md shadow-2xl',
          onClick: e => e.stopPropagation()
        },
          React.createElement('h2', { className: 'text-2xl font-bold text-center mb-4 text-red-600' }, 'PILNA POMOC'),
          React.createElement('p', { className: 'text-center mb-6' }, 'Wybierz rodzaj pomocy:'),
          
          React.createElement('div', {
            className: 'flex items-center p-4 mb-3 bg-gray-100 rounded-xl cursor-pointer hover:bg-gray-200',
            onClick: () => sendEmergencyMessage('family')
          },
            React.createElement('div', { className: 'text-3xl mr-4' }, 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶'),
            React.createElement('div', { className: 'flex-1' },
              React.createElement('div', { className: 'font-bold text-lg' }, 'Powiadom rodzinƒô'),
              React.createElement('div', { className: 'text-sm text-gray-600' }, 'Wy≈õlij wiadomo≈õƒá przez WhatsApp/Viber')
            )
          ),
          
          React.createElement('div', {
            className: 'flex items-center p-4 mb-3 bg-gray-100 rounded-xl cursor-pointer hover:bg-gray-200',
            onClick: () => sendEmergencyMessage('medical')
          },
            React.createElement('div', { className: 'text-3xl mr-4' }, 'üöë'),
            React.createElement('div', { className: 'flex-1' },
              React.createElement('div', { className: 'font-bold text-lg' }, 'Pomoc medyczna'),
              React.createElement('div', { className: 'text-sm text-gray-600' }, 'Powiadom rodzinƒô i zadzwo≈Ñ po pomoc')
            )
          ),
          
          React.createElement('div', {
            className: 'flex items-center p-4 mb-3 bg-gray-100 rounded-xl cursor-pointer hover:bg-gray-200',
            onClick: () => sendEmergencyMessage('services')
          },
            React.createElement('div', { className: 'text-3xl mr-4' }, 'üìû'),
            React.createElement('div', { className: 'flex-1' },
              React.createElement('div', { className: 'font-bold text-lg' }, 'Zadzwo≈Ñ po pomoc'),
              React.createElement('div', { className: 'text-sm text-gray-600' }, 'Zadzwo≈Ñ do s≈Çu≈ºb lub numeru alarmowego')
            )
          ),
          
          React.createElement('button', {
            className: 'w-full bg-gray-400 hover:bg-gray-500 text-white p-4 rounded-xl font-bold text-lg mt-4',
            onClick: () => setShowEmergencyDialog(false)
          }, 'Anuluj')
        )
      ),

      showInstallPrompt && isInstallable && React.createElement('div', { className: 'fixed bottom-5 left-1/2 -translate-x-1/2 z-50 bg-blue-600 text-white p-4 rounded-2xl shadow-2xl max-w-md w-11/12' },
        React.createElement('div', { className: 'flex items-center justify-between' },
          React.createElement('div', { className: 'flex-1' },
            React.createElement('p', { className: 'text-lg font-bold' }, 'Zainstaluj Senior-Easy'),
            React.createElement('p', { className: 'text-sm' }, 'U≈ºywaj aplikacji jak natywnej!')
          ),
          React.createElement('div', { className: 'flex space-x-2' },
            React.createElement('button', {
              onClick: handleInstallClick,
              className: 'bg-white text-blue-600 px-4 py-2 rounded-xl font-bold'
            }, 'Instaluj'),
            React.createElement('button', {
              onClick: () => setShowInstallPrompt(false),
              className: 'bg-blue-700 px-4 py-2 rounded-xl'
            }, 'P√≥≈∫niej')
          )
        )
      ),

      React.createElement('div', { className: 'bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-3 sm:p-4 mb-4 sm:mb-6 flex justify-between items-center' },
        React.createElement('button', {
          onClick: () => setCurrentScreen('home'),
          className: 'bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white p-2 sm:p-4 rounded-xl sm:rounded-2xl transition-colors'
        }, React.createElement('span', { className: 'text-3xl sm:text-5xl' }, 'üè†')),
        
        React.createElement('div', { className: 'text-lg sm:text-2xl md:text-3xl font-bold text-gray-800 px-2 text-center' },
          currentScreen === 'home' ? 'Strona G≈Ç√≥wna' :
          currentScreen === 'video' ? 'Rozmowa Wideo' :
          currentScreen === 'medications' ? 'Leki' :
          currentScreen === 'contacts' ? 'Rodzina' :
          currentScreen === 'services' ? 'Us≈Çugi' :
          currentScreen === 'news' ? 'Wiadomo≈õci' :
          currentScreen === 'notifications' ? `Powiadomienia (${unreadNotificationsCount})` :
          'Ustawienia'
        ),
        
        React.createElement('button', {
          onClick: () => setCurrentScreen('settings'),
          className: 'bg-gray-500 hover:bg-gray-600 active:bg-gray-700 text-white p-2 sm:p-4 rounded-xl sm:rounded-2xl transition-colors relative'
        },
          React.createElement('span', { className: 'text-3xl sm:text-5xl' }, '‚öôÔ∏è'),
          unreadNotificationsCount > 0 && React.createElement('span', { className: 'notification-badge' }, unreadNotificationsCount)
        )
      ),

      React.createElement('div', { className: 'bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-6 md:p-8' },
        currentScreen === 'home' && renderHomeScreen(),
        currentScreen === 'video' && renderVideoScreen(),
        currentScreen === 'medications' && renderMedicationsScreen(),
        currentScreen === 'contacts' && renderContactsScreen(),
        currentScreen === 'services' && renderServicesScreen(),
        currentScreen === 'news' && renderNewsScreen(),
        currentScreen === 'notifications' && renderNotificationsScreen(),
        currentScreen === 'settings' && renderSettingsScreen()
      ),

      renderEmergencySettings(),
      renderNotifyDialog(),

      // DODANY PROMPT DLA LOKALIZACJI
      showLocationPrompt && React.createElement('div', { 
        className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4'
      },
        React.createElement('div', {
          className: 'bg-white rounded-3xl p-6 max-w-md w-full shadow-2xl'
        },
          React.createElement('h3', { className: 'text-2xl font-bold text-center mb-4' }, 'üåç Lokalizacja'),
          React.createElement('p', { className: 'text-center mb-6' }, 'Aplikacja prosi o dostƒôp do Twojej lokalizacji, aby wy≈õwietliƒá aktualnƒÖ pogodƒô.'),
          React.createElement('div', { className: 'text-center py-4' },
            React.createElement('div', { className: 'loading-spinner mx-auto mb-4' }),
            React.createElement('p', null, 'Oczekiwanie na pozwolenie...')
          ),
          React.createElement('button', {
            onClick: () => {
              setShowLocationPrompt(false);
              fetchWeather(52.2297, 21.0122); // Domy≈õlnie Warszawa
            },
            className: 'w-full bg-gray-400 hover:bg-gray-500 text-white p-4 rounded-2xl font-bold'
          }, 'U≈ºyj domy≈õlnej lokalizacji (Warszawa)')
        )
      ),

      React.createElement('div', { className: 'text-center mt-6 text-gray-600 text-lg md:text-xl' },
        React.createElement('p', null, 'Senior-Easy ¬© 2025 | Pomoc: +480 800 800')
      )
    );
  }

  ReactDOM.render(React.createElement(SeniorEasyApp), document.getElementById('root'));
  </script>
  
  <script>
    // Rejestracja Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
          .then(registration => {
            console.log('‚úÖ Service Worker zarejestrowany:', registration.scope);
            
            setInterval(() => {
              registration.update();
            }, 60000);
          })
          .catch(error => {
            console.log('‚ùå B≈ÇƒÖd rejestracji Service Worker:', error);
          });
      });
      
      let refreshing = false;
      navigator.serviceWorker.addEventListener('controllerchange', () => {
        if (!refreshing) {
          refreshing = true;
          window.location.reload();
        }
      });
    }
  </script>
</body>
</html>
